<html>
<head>
  <title>Express</title>
  <link rel="stylesheet" href="/stylesheets/style.css">

  <!-- abre la conexión con el sevidor -->
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    /* conecta con la linea 29 del www.js, es un broadcast */
    socket.on('entradaUsuario', (msg) =>{
      console.log(msg)
    });

    function enviar(){
      const texto = document.getElementById("cajaTexto").value;
      socket.emit('mensaje', texto);
      mostrarMensaje("Yo: " + texto); // Mostrar el mensaje enviado por el usuario
      document.getElementById("cajaTexto").value = ""; // Limpiar el campo de texto después de enviar el mensaje
    }

    socket.on('mensaje', (datos) =>{
      mostrarMensaje(datos);
    });

    function mostrarMensaje(mensaje) {
      const mensajesElement = document.getElementById("mensajes");
      mensajesElement.innerHTML += "<p>" + mensaje + "</p>";
    }
  </script>
</head>

<body>
  <h1>Mi chat</h1>
  <p>Welcome to Lucia Chat</p>

  <input type="text" id="cajaTexto">
  <button onClick="enviar()">Enviar</button>

  <div id="mensajes"></div>
</body>
</html>
