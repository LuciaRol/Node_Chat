<html>
<head>
  <title>Chat Luc√≠a</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    socket.on('entradaUsuario', (msg) =>{
      console.log(msg)
    });

    function enviar(){
      const texto = document.getElementById("cajaTexto").value;
      socket.emit('mensaje', texto);
      mostrarMensaje("Yo: " + texto);
      document.getElementById("cajaTexto").value = "";
    }

    function mostrarMensaje(mensaje) {
      const mensajesElement = document.getElementById("mensajes");
      mensajesElement.innerHTML += "<p>" + mensaje + "</p>";
    }

    socket.on('mensaje', (datos) =>{
      mostrarMensaje(datos);
    });

    socket.on('nick', (msg)=>{
      socket.nick = msg;
      socket.broadcast.emit('entrada', msg + ' ha entrado al chat');
    });

    // Function to send emoji when clicked
    function enviarEmoji(emojiSrc) {
      const emojiHTML = "<img src='" + emojiSrc + "' alt='Emoji' style='width: 30px; height: 30px'>";
      socket.emit('mensaje', emojiHTML);
      mostrarMensaje("Yo: " + emojiHTML);
    }
  </script>
</head>

<body>
  <h1>Mi chat</h1>
  <p>Welcome to Lucia Chat</p>

  <input type="text" id="cajaTexto">
  <button onClick="enviar()">Enviar</button>

  <div id="mensajes"></div>

  <div>
    <ul>
      <!-- Add event listeners to emojis -->
      <li class="emoji" onclick="enviarEmoji('./img/reir.png')"><img src="./img/reir.png" alt="Reir"></li>
      <li class="emoji" onclick="enviarEmoji('./img/omg.png')"><img src="./img/omg.png" alt="Omg"></li>
      <li class="emoji" onclick="enviarEmoji('./img/ira.png')"><img src="./img/ira.png" alt="Ira"></li>
    </ul>
  </div>
</body>
</html>

<style>
  .emoji {
    list-style: none;
    display: inline-block;
    cursor: pointer;
  }

  .emoji img{
    width: 50px;
    height: 50px;
  }
</style>
