<html>
<head>
  <title>Chat Lucía</title>
  <link rel="stylesheet" href="/stylesheets/style.css">

  <!-- abre la conexión con el sevidor -->
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    /* conecta con la linea 29 del www.js, es un broadcast */
    socket.on('entradaUsuario', (msg) =>{
      console.log(msg)
    });

    function enviar(){
      const texto = document.getElementById("cajaTexto").value;
      socket.emit('mensaje', texto);
      mostrarMensaje("Yo: " + texto); // muestra el mensaje enviado por el usuario
      document.getElementById("cajaTexto").value = ""; // limpia el campo de texto después de enviar el mensaje
    }

    function mostrarMensaje(mensaje) {
      const mensajesElement = document.getElementById("mensajes");
      mensajesElement.innerHTML += "<p>" + mensaje + "</p>";
    }

    socket.on('mensaje', (datos) =>{
      mostrarMensaje(datos);
    });

    socket.on('nick', (msg)=>{
      socket.nick = msg;
      socket.broadcast.emit('entrada', mesg + 'ha entrado al chat');
    })
    
  </script>
</head>

<body>
  <h1>Mi chat</h1>
  <p>Welcome to Lucia Chat</p>

  <input type="text" id="cajaTexto">
  <button onClick="enviar()">Enviar</button>

  <div id="mensajes"></div>

  <div>
    <ul>
      <li class="emoji"><img src="./img/reir.png" alt=""></li>
      <li class="emoji"><img src="./img/omg.png" alt=""></li>
      <li class="emoji"><img src="./img/ira.png" alt=""></li>

    </ul>
  </div>
</body>
</html>

<style>
  .emoji {
    list-style: none;
    display: inline-block;
    cursor: pointer;
  }

  .emoji img{
    width: 50px;
    height: 50px;
  }
</style>
